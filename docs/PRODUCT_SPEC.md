# Gravity: 240370 紫外线指数传感器技术规格

## 产品概述

Gravity: 240370 紫外线指数传感器是一款能直接输出紫外线 UV 指数的传感器，能检测 240-370nm 波长范围内的紫外线强度，涵盖 UVA\UVB\UVC 三种波长范围。主要波长集中在 UVB 段，常用于皮肤健康评估和 UV 指数监测。

## 技术参数

| 参数        | 规格       |
| ----------- | ---------- |
| 工作电压    | 3.3V-5V DC |
| 通讯方式    | I2C、UART  |
| I2C 地址    | 0x23       |
| UV 波长范围 | 240-370nm  |
| 工作温度    | -30~80°C   |
| 尺寸        | 30mm×22mm  |

## 引脚定义

| 引脚号 | 名称             | 功能描述                              |
| ------ | ---------------- | ------------------------------------- |
| 1      | D/R              | I2C 数据线 SDA 或串口 UART 接收端 RXD |
| 2      | C/T              | I2C 时钟线 SCL 或串口 UART 发送端 TXD |
| 3      | GND              | 电源负极                              |
| 4      | VCC              | 电源正极（3.3~5V）                    |
| 5      | 通讯模式选择开关 | 选择 I2C/UART 通讯模式                |

## 紫外线指数表

| 紫外线原始值   | <50 | 227 | 318 | 408 | 503 | 606 | 696 | 795 | 881  | 976  | 1079 | 1170 |
| -------------- | --- | --- | --- | --- | --- | --- | --- | --- | ---- | ---- | ---- | ---- |
| 紫外线指数     | 0   | 1   | 2   | 3   | 4   | 5   | 6   | 7   | 8    | 9    | 10   | 11   |
| 紫外线风险等级 | 低  | 低  | 低  | 中  | 中  | 中  | 高  | 高  | 很高 | 很高 | 很高 | 极高 |

## 库函数 API

### Python API

```python
# 初始化传感器
begin()                  # 返回布尔值，表示初始化成功或失败

# 读取UV原始数据
read_UV_original_data()  # 返回整数，表示紫外线原始值(mV)

# 读取UV指数
read_UV_index_data()     # 返回整数，表示紫外线指数(0-11)

# 读取风险等级
read_risk_level_data()   # 返回整数，表示风险等级(0-4)
```

### Arduino API

```cpp
// 初始化传感器
bool begin(void);  // 返回布尔值，表示初始化成功或失败

// 读取UV原始数据
uint16_t readUvOriginalData(void); // 返回紫外线原始值(mV)

// 读取UV指数
uint16_t readUvIndexData(void); // 返回紫外线指数(0-11)

// 读取风险等级
uint16_t readRiskLevelData(void); // 返回风险等级(0-4)
```

## 行空板特定优化

针对行空板平台，我们进行了以下优化：

1. 修复了 PinPong 库下的 I2C 通信问题
2. 增加了设备 ID 双向字节序识别
3. 添加了更好的错误处理和诊断信息
4. 提供了模拟模式，便于无传感器时进行开发测试
5. 优化了数据异常情况下的逻辑处理

## 应用场景

- 环境监测：检测和监控紫外线辐射水平
- 健康保护：提醒用户保护皮肤免受过度暴露于紫外线的伤害
- 光伏系统：优化太阳能电池板的性能
- 农业：监控植物的光环境，优化生长条件
- 实验室研究：测量和分析紫外线辐射的影响
